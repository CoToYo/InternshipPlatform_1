{"remainingRequest":"E:\\User_Management\\us_login\\InternshipPlatform-v0.1\\node_modules\\babel-loader\\lib\\index.js!E:\\User_Management\\us_login\\InternshipPlatform-v0.1\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\User_Management\\us_login\\InternshipPlatform-v0.1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\User_Management\\us_login\\InternshipPlatform-v0.1\\src\\student\\stuInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\User_Management\\us_login\\InternshipPlatform-v0.1\\src\\student\\stuInfo.vue","mtime":1638613396577},{"path":"E:\\User_Management\\us_login\\InternshipPlatform-v0.1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1638847566224},{"path":"E:\\User_Management\\us_login\\InternshipPlatform-v0.1\\node_modules\\babel-loader\\lib\\index.js","mtime":1638847628223},{"path":"E:\\User_Management\\us_login\\InternshipPlatform-v0.1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1638847566224},{"path":"E:\\User_Management\\us_login\\InternshipPlatform-v0.1\\node_modules\\vue-loader\\lib\\index.js","mtime":1638847616872}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"E:\\\\User_Management\\\\us_login\\\\InternshipPlatform-v0.1\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/*  import headTop from '@/components/headTop'\n  import {cityGuess, addShop, searchplace, foodCategory} from '@/api/getData'\n  import {baseUrl, baseImgPath} from '@/config/env'*/\nexport default {\n  data: function data() {\n    return {\n      city: {},\n      formData: {\n        name: '',\n        //店铺名称\n        address: '',\n        //地址\n        latitude: '',\n        longitude: '',\n        description: '',\n        //介绍\n        phone: '',\n        promotion_info: '',\n        is_premium: true,\n        delivery_mode: true,\n        new: true,\n        bao: true,\n        zhun: true,\n        piao: true,\n        startTime: '',\n        endTime: '',\n        image_path: '',\n        business_license_image: '',\n        catering_service_license_image: ''\n      },\n      rules: {\n        phone: [{\n          required: true,\n          message: '请输入联系电话'\n        }, {\n          type: 'number',\n          message: '电话号码必须是数字'\n        }]\n      },\n      // baseUrl,\n      // baseImgPath,\n      categoryOptions: []\n    };\n  },\n  components: {// headTop,\n  },\n  mounted: function mounted() {\n    this.initData();\n  },\n  methods: {\n    initData: function () {\n      var _initData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        var categories;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return cityGuess();\n\n              case 3:\n                this.city = _context.sent;\n                _context.next = 6;\n                return foodCategory();\n\n              case 6:\n                categories = _context.sent;\n                categories.forEach(function (item) {\n                  if (item.sub_categories.length) {\n                    var addnew = {\n                      value: item.name,\n                      label: item.name,\n                      children: []\n                    };\n                    item.sub_categories.forEach(function (subitem, index) {\n                      if (index == 0) {\n                        return;\n                      }\n\n                      addnew.children.push({\n                        value: subitem.name,\n                        label: subitem.name\n                      });\n                    });\n\n                    _this.categoryOptions.push(addnew);\n                  }\n                });\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(_context.t0);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 10]]);\n      }));\n\n      function initData() {\n        return _initData.apply(this, arguments);\n      }\n\n      return initData;\n    }(),\n    querySearchAsync: function () {\n      var _querySearchAsync = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2(queryString, cb) {\n        var cityList;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!queryString) {\n                  _context2.next = 11;\n                  break;\n                }\n\n                _context2.prev = 1;\n                _context2.next = 4;\n                return searchplace(this.city.id, queryString);\n\n              case 4:\n                cityList = _context2.sent;\n\n                if (cityList instanceof Array) {\n                  cityList.map(function (item) {\n                    item.value = item.address;\n                    return item;\n                  });\n                  cb(cityList);\n                }\n\n                _context2.next = 11;\n                break;\n\n              case 8:\n                _context2.prev = 8;\n                _context2.t0 = _context2[\"catch\"](1);\n                console.log(_context2.t0);\n\n              case 11:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[1, 8]]);\n      }));\n\n      function querySearchAsync(_x, _x2) {\n        return _querySearchAsync.apply(this, arguments);\n      }\n\n      return querySearchAsync;\n    }(),\n    addressSelect: function addressSelect(address) {\n      this.formData.latitude = address.latitude;\n      this.formData.longitude = address.longitude;\n      console.log(this.formData.latitude, this.formData.longitude);\n    },\n    handleShopAvatarScucess: function handleShopAvatarScucess(res, file) {\n      if (res.status == 1) {\n        this.formData.image_path = res.image_path;\n      } else {\n        this.$message.error('上传图片失败！');\n      }\n    },\n    handleBusinessAvatarScucess: function handleBusinessAvatarScucess(res, file) {\n      if (res.status == 1) {\n        this.formData.business_license_image = res.image_path;\n      } else {\n        this.$message.error('上传图片失败！');\n      }\n    },\n    handleServiceAvatarScucess: function handleServiceAvatarScucess(res, file) {\n      if (res.status == 1) {\n        this.formData.catering_service_license_image = res.image_path;\n      } else {\n        this.$message.error('上传图片失败！');\n      }\n    },\n    beforeAvatarUpload: function beforeAvatarUpload(file) {\n      var isRightType = file.type === 'image/jpeg' || file.type === 'image/png';\n      var isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isRightType) {\n        this.$message.error('上传头像图片只能是 JPG 格式!');\n      }\n\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n\n      return isRightType && isLt2M;\n    },\n    tableRowClassName: function tableRowClassName(row, index) {\n      if (index === 1) {\n        return 'info-row';\n      } else if (index === 3) {\n        return 'positive-row';\n      }\n\n      return '';\n    },\n    selectActivity: function selectActivity() {\n      var _this2 = this;\n\n      this.$prompt('请输入活动详情', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消'\n      }).then(function (_ref) {\n        var value = _ref.value;\n\n        if (value == null) {\n          _this2.$message({\n            type: 'info',\n            message: '请输入活动详情'\n          });\n\n          return;\n        }\n\n        var newObj = {};\n\n        _this2.activities.push(newObj);\n      }).catch(function () {\n        _this2.$message({\n          type: 'info',\n          message: '取消输入'\n        });\n      });\n    },\n    handleDelete: function handleDelete(index) {\n      this.activities.splice(index, 1);\n    },\n    submitForm: function submitForm(formName) {\n      var _this3 = this;\n\n      this.$refs[formName].validate(\n      /*#__PURE__*/\n      function () {\n        var _ref2 = _asyncToGenerator(\n        /*#__PURE__*/\n        regeneratorRuntime.mark(function _callee3(valid) {\n          var result;\n          return regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  if (!valid) {\n                    _context3.next = 15;\n                    break;\n                  }\n\n                  Object.assign(_this3.formData, {\n                    activities: _this3.activities\n                  }, {\n                    category: _this3.selectedCategory.join('/')\n                  });\n                  _context3.prev = 2;\n                  _context3.next = 5;\n                  return addShop(_this3.formData);\n\n                case 5:\n                  result = _context3.sent;\n\n                  if (result.status == 1) {\n                    _this3.$message({\n                      type: 'success',\n                      message: '添加成功'\n                    });\n\n                    _this3.formData = {\n                      name: '',\n                      //店铺名称\n                      address: '',\n                      //地址\n                      latitude: '',\n                      longitude: '',\n                      description: '',\n                      //介绍\n                      phone: '',\n                      promotion_info: '',\n                      float_delivery_fee: 5,\n                      //运费\n                      float_minimum_order_amount: 20,\n                      //起价\n                      is_premium: true,\n                      delivery_mode: true,\n                      new: true,\n                      bao: true,\n                      zhun: true,\n                      piao: true,\n                      startTime: '',\n                      endTime: '',\n                      image_path: '',\n                      business_license_image: '',\n                      catering_service_license_image: ''\n                    };\n                    _this3.selectedCategory = ['快餐便当', '简餐'];\n                    _this3.activities = [{\n                      icon_name: '减',\n                      name: '满减优惠',\n                      description: '满30减5，满60减8'\n                    }];\n                  } else {\n                    _this3.$message({\n                      type: 'error',\n                      message: result.message\n                    });\n                  }\n\n                  console.log(result);\n                  _context3.next = 13;\n                  break;\n\n                case 10:\n                  _context3.prev = 10;\n                  _context3.t0 = _context3[\"catch\"](2);\n                  console.log(_context3.t0);\n\n                case 13:\n                  _context3.next = 17;\n                  break;\n\n                case 15:\n                  _this3.$notify.error({\n                    title: '错误',\n                    message: '请检查输入是否正确',\n                    offset: 100\n                  });\n\n                  return _context3.abrupt(\"return\", false);\n\n                case 17:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3, null, [[2, 10]]);\n        }));\n\n        return function (_x3) {\n          return _ref2.apply(this, arguments);\n        };\n      }());\n    }\n  }\n};",{"version":3,"sources":["stuInfo.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div>\n        <!-- <head-top></head-top> -->\n        <el-row style=\"margin-top: 20px;\">\n  \t\t\t<el-col :span=\"12\" :offset=\"4\">\n\t\t        <el-form :model=\"formData\" :rules=\"rules\" ref=\"formData\" label-width=\"110px\" class=\"demo-formData\">\n\t\t\t\t\t<el-form-item label=\"姓名\" prop=\"name\">\n\t\t\t\t\t\t<el-input v-model=\"formData.name\"></el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"学号\" prop=\"address\">\n\t\t\t\t\t\t<el-input v-model=\"formData.number\"></el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"联系电话\" prop=\"phone\">\n\t\t\t\t\t\t<el-input v-model.number=\"formData.phone\" maxLength=\"11\"></el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"QQ\" prop=\"qq\">\n\t\t\t\t\t\t<el-input v-model=\"formData.description\"></el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"邮箱\" prop=\"mail\">\n\t\t\t\t\t\t<el-input v-model=\"formData.promotion_info\"></el-input>\n\t\t\t\t\t</el-form-item>\n\r\n\t\t\t\t\t<el-form-item label=\"上传头像\">\r\n\t\t\t\t\t\t<el-upload\r\n\t\t\t\t\t\t  class=\"avatar-uploader\"\r\n\t\t\t\t\t\t  :action=\"baseUrl + '/v1/addimg/shop'\"\r\n\t\t\t\t\t\t  :show-file-list=\"false\"\r\n\t\t\t\t\t\t  :on-success=\"handleShopAvatarScucess\"\r\n\t\t\t\t\t\t  :before-upload=\"beforeAvatarUpload\">\r\n\t\t\t\t\t\t  <img v-if=\"formData.image_path\" :src=\"baseImgPath + formData.image_path\" class=\"avatar\">\r\n\t\t\t\t\t\t  <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n\t\t\t\t\t\t</el-upload>\r\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\n\t\t\t\t\t<el-form-item class=\"button_submit\">\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"submitForm('formData')\">立即创建</el-button>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</el-form>\n  \t\t\t</el-col>\n  \t\t</el-row>\n    </div>\n</template>\n\n<script>\n  /*  import headTop from '@/components/headTop'\n    import {cityGuess, addShop, searchplace, foodCategory} from '@/api/getData'\n    import {baseUrl, baseImgPath} from '@/config/env'*/\n    export default {\n    \tdata(){\n    \t\treturn {\n    \t\t\tcity: {},\n    \t\t\tformData: {\n\t\t\t\t\tname: '', //店铺名称\n\t\t\t\t\taddress: '', //地址\n\t\t\t\t\tlatitude: '',\n\t\t\t\t\tlongitude: '',\n\t\t\t\t\tdescription: '', //介绍\n\t\t\t\t\tphone: '',\n\t\t\t\t\tpromotion_info: '',\n\t\t\t\t\tis_premium: true,\n\t\t\t\t\tdelivery_mode: true,\n\t\t\t\t\tnew: true,\n\t\t\t\t\tbao: true,\n\t\t\t\t\tzhun: true,\n\t\t\t\t\tpiao: true,\n\t\t\t\t\tstartTime: '',\n       \t \t\t\tendTime: '',\n       \t \t\t\timage_path: '',\n       \t \t\t\tbusiness_license_image: '',\n       \t \t\t\tcatering_service_license_image: '',\n\n\t\t        },\n\t\t        rules: {\n\n\t\t\t\t\tphone: [\n\t\t\t\t\t\t{ required: true, message: '请输入联系电话' },\n\t\t\t\t\t\t{ type: 'number', message: '电话号码必须是数字' }\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t    // baseUrl,\n\t\t\t    // baseImgPath,\n\t\t\t    categoryOptions: [],\n    \t\t}\n    \t},\n    \tcomponents: {\n    \t\t// headTop,\n    \t},\n    \tmounted(){\n    \t\tthis.initData();\n    \t},\n    \tmethods: {\n    \t\tasync initData(){\n    \t\t\ttry{\n    \t\t\t\tthis.city = await cityGuess();\n    \t\t\t\tconst categories = await foodCategory();\n    \t\t\t\tcategories.forEach(item => {\n    \t\t\t\t\tif (item.sub_categories.length) {\n    \t\t\t\t\t\tconst addnew = {\n    \t\t\t\t\t\t\tvalue: item.name,\n\t\t\t\t\t\t        label: item.name,\n\t\t\t\t\t\t        children: []\n    \t\t\t\t\t\t}\n    \t\t\t\t\t\titem.sub_categories.forEach((subitem, index) => {\n    \t\t\t\t\t\t\tif (index == 0) {\n    \t\t\t\t\t\t\t\treturn\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\taddnew.children.push({\n    \t\t\t\t\t\t\t\tvalue: subitem.name,\n\t\t\t\t\t\t        \tlabel: subitem.name,\n    \t\t\t\t\t\t\t})\n    \t\t\t\t\t\t})\n    \t\t\t\t\t\tthis.categoryOptions.push(addnew)\n\n    \t\t\t\t\t}\n    \t\t\t\t})\n    \t\t\t}catch(err){\n    \t\t\t\tconsole.log(err);\n    \t\t\t}\n    \t\t},\n    \t\tasync querySearchAsync(queryString, cb) {\n    \t\t\tif (queryString) {\n\t    \t\t\ttry{\n\t    \t\t\t\tconst cityList = await searchplace(this.city.id, queryString);\n\t    \t\t\t\tif (cityList instanceof Array) {\n\t\t    \t\t\t\tcityList.map(item => {\n\t\t    \t\t\t\t\titem.value = item.address;\n\t\t    \t\t\t\t\treturn item;\n\t\t    \t\t\t\t})\n\t\t    \t\t\t\tcb(cityList)\n\t    \t\t\t\t}\n\t    \t\t\t}catch(err){\n\t    \t\t\t\tconsole.log(err)\n\t    \t\t\t}\n    \t\t\t}\n\t\t    },\n\t\t    addressSelect(address){\n\t\t    \tthis.formData.latitude = address.latitude;\n\t\t    \tthis.formData.longitude = address.longitude;\n\t\t    \tconsole.log(this.formData.latitude, this.formData.longitude)\n\t\t    },\n\t\t\thandleShopAvatarScucess(res, file) {\n\t\t\t\tif (res.status == 1) {\n\t\t\t\t\tthis.formData.image_path = res.image_path;\n\t\t\t\t}else{\n\t\t\t\t\tthis.$message.error('上传图片失败！');\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleBusinessAvatarScucess(res, file) {\n\t\t\t\tif (res.status == 1) {\n\t\t\t\t\tthis.formData.business_license_image = res.image_path;\n\t\t\t\t}else{\n\t\t\t\t\tthis.$message.error('上传图片失败！');\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleServiceAvatarScucess(res, file) {\n\t\t\t\tif (res.status == 1) {\n\t\t\t\t\tthis.formData.catering_service_license_image = res.image_path;\n\t\t\t\t}else{\n\t\t\t\t\tthis.$message.error('上传图片失败！');\n\t\t\t\t}\n\t\t\t},\n\t\t\tbeforeAvatarUpload(file) {\n\t\t\t\tconst isRightType = (file.type === 'image/jpeg') || (file.type === 'image/png');\n\t\t\t\tconst isLt2M = file.size / 1024 / 1024 < 2;\n\n\t\t\t\tif (!isRightType) {\n\t\t\t\t\tthis.$message.error('上传头像图片只能是 JPG 格式!');\n\t\t\t\t}\n\t\t\t\tif (!isLt2M) {\n\t\t\t\t\tthis.$message.error('上传头像图片大小不能超过 2MB!');\n\t\t\t\t}\n\t\t\t\treturn isRightType && isLt2M;\n\t\t\t},\n\t\t\ttableRowClassName(row, index) {\n\t\t        if (index === 1) {\n\t\t        \treturn 'info-row';\n\t\t        } else if (index === 3) {\n\t\t        \treturn 'positive-row';\n\t\t        }\n\t\t        return '';\n\t\t    },\n\t\t    selectActivity(){\n\t\t    \tthis.$prompt('请输入活动详情', '提示', {\n\t\t          \tconfirmButtonText: '确定',\n\t\t          \tcancelButtonText: '取消',\n\t\t        }).then(({ value }) => {\n\t\t        \tif (value == null) {\n\t\t        \t\tthis.$message({\n\t\t\t\t            type: 'info',\n\t\t\t\t            message: '请输入活动详情'\n\t\t\t\t        });\n\t\t        \t\treturn\n\t\t        \t}\n\t\t          \tlet newObj = {};\n\t\t          \t\n\t\t          \tthis.activities.push(newObj);\n\t\t        }).catch(() => {\n\t\t          \tthis.$message({\n\t\t            \ttype: 'info',\n\t\t            \tmessage: '取消输入'\n\t\t          \t});\n\t\t        });\n\t\t    },\n\t\t    handleDelete(index){\n\t\t    \tthis.activities.splice(index, 1)\n\t\t    },\n\t\t    submitForm(formName) {\n\t\t\t\tthis.$refs[formName].validate(async (valid) => {\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tObject.assign(this.formData, {activities: this.activities}, {\n\t\t\t\t\t\t\tcategory: this.selectedCategory.join('/')\n\t\t\t\t\t\t})\n\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\tlet result = await addShop(this.formData);\n\t\t\t\t\t\t\tif (result.status == 1) {\n\t\t\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t            \ttype: 'success',\n\t\t\t\t\t            \tmessage: '添加成功'\n\t\t\t\t\t          \t});\n\t\t\t\t\t          \tthis.formData = {\n\t\t\t\t\t\t\t\t\tname: '', //店铺名称\n\t\t\t\t\t\t\t\t\taddress: '', //地址\n\t\t\t\t\t\t\t\t\tlatitude: '',\n\t\t\t\t\t\t\t\t\tlongitude: '',\n\t\t\t\t\t\t\t\t\tdescription: '', //介绍\n\t\t\t\t\t\t\t\t\tphone: '',\n\t\t\t\t\t\t\t\t\tpromotion_info: '',\n\t\t\t\t\t\t\t\t\tfloat_delivery_fee: 5, //运费\n\t\t\t\t\t\t\t\t\tfloat_minimum_order_amount: 20, //起价\n\t\t\t\t\t\t\t\t\tis_premium: true,\n\t\t\t\t\t\t\t\t\tdelivery_mode: true,\n\t\t\t\t\t\t\t\t\tnew: true,\n\t\t\t\t\t\t\t\t\tbao: true,\n\t\t\t\t\t\t\t\t\tzhun: true,\n\t\t\t\t\t\t\t\t\tpiao: true,\n\t\t\t\t\t\t\t\t\tstartTime: '',\n\t\t\t\t       \t \t\t\tendTime: '',\n\t\t\t\t       \t \t\t\timage_path: '',\n\t\t\t\t       \t \t\t\tbusiness_license_image: '',\n\t\t\t\t       \t \t\t\tcatering_service_license_image: '',\n\t\t\t\t\t\t        };\n\t\t\t\t\t\t        this.selectedCategory = ['快餐便当', '简餐'];\n\t\t\t\t\t\t        this.activities = [{\n\t\t\t\t\t\t        \ticon_name: '减',\n\t\t\t\t\t\t        \tname: '满减优惠',\n\t\t\t\t\t\t        \tdescription: '满30减5，满60减8',\n\t\t\t\t\t\t\t    }];\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t            \ttype: 'error',\n\t\t\t\t\t            \tmessage: result.message\n\t\t\t\t\t          \t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsole.log(result)\n\t\t\t\t\t\t}catch(err){\n\t\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$notify.error({\n\t\t\t\t\t\t\ttitle: '错误',\n\t\t\t\t\t\t\tmessage: '请检查输入是否正确',\n\t\t\t\t\t\t\toffset: 100\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t}\n    }\n</script>\n\n<style lang=\"less\">\n\t@import '../style/mixin';\n\t.button_submit{\n\t\ttext-align: center;\n\t}\n\t.avatar-uploader .el-upload {\n\t    border: 1px dashed #d9d9d9;\n\t    border-radius: 6px;\n\t    cursor: pointer;\n\t    position: relative;\n\t    overflow: hidden;\n\t}\n\t.avatar-uploader .el-upload:hover {\n\t    border-color: #20a0ff;\n\t}\n\t.avatar-uploader-icon {\n\t    font-size: 28px;\n\t    color: #8c939d;\n\t    width: 120px;\n\t    height: 120px;\n\t    line-height: 120px;\n\t    text-align: center;\n\t}\n\t.avatar {\n\t    width: 120px;\n\t    height: 120px;\n\t    display: block;\n\t}\n\t.el-table .info-row {\n\t    background: #c9e5f5;\n\t}\n\n\t.el-table .positive-row {\n\t    background: #e2f0e4;\n\t}\n</style>\n"],"sourceRoot":"src/student"}]}