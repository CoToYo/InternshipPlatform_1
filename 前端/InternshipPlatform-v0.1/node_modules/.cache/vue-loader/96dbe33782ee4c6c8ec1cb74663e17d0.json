{"remainingRequest":"E:\\User_Management\\us_login\\InternshipPlatform-v0.1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\User_Management\\us_login\\InternshipPlatform-v0.1\\src\\student\\stuInfo.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"E:\\User_Management\\us_login\\InternshipPlatform-v0.1\\src\\student\\stuInfo.vue","mtime":1638613396577},{"path":"E:\\User_Management\\us_login\\InternshipPlatform-v0.1\\node_modules\\css-loader\\index.js","mtime":1638847532879},{"path":"E:\\User_Management\\us_login\\InternshipPlatform-v0.1\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1638847616914},{"path":"E:\\User_Management\\us_login\\InternshipPlatform-v0.1\\node_modules\\postcss-loader\\src\\index.js","mtime":1638847625520},{"path":"E:\\User_Management\\us_login\\InternshipPlatform-v0.1\\node_modules\\less-loader\\dist\\cjs.js","mtime":1638872142429},{"path":"E:\\User_Management\\us_login\\InternshipPlatform-v0.1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1638847566224},{"path":"E:\\User_Management\\us_login\\InternshipPlatform-v0.1\\node_modules\\vue-loader\\lib\\index.js","mtime":1638847616872}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import '../style/mixin';\n.button_submit{\n\ttext-align: center;\n}\n.avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n    border-color: #20a0ff;\n}\n.avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 120px;\n    height: 120px;\n    line-height: 120px;\n    text-align: center;\n}\n.avatar {\n    width: 120px;\n    height: 120px;\n    display: block;\n}\n.el-table .info-row {\n    background: #c9e5f5;\n}\n\n.el-table .positive-row {\n    background: #e2f0e4;\n}\n",{"version":3,"sources":["stuInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"stuInfo.vue","sourceRoot":"src/student","sourcesContent":["<template>\n    <div>\n        <!-- <head-top></head-top> -->\n        <el-row style=\"margin-top: 20px;\">\n  \t\t\t<el-col :span=\"12\" :offset=\"4\">\n\t\t        <el-form :model=\"formData\" :rules=\"rules\" ref=\"formData\" label-width=\"110px\" class=\"demo-formData\">\n\t\t\t\t\t<el-form-item label=\"姓名\" prop=\"name\">\n\t\t\t\t\t\t<el-input v-model=\"formData.name\"></el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"学号\" prop=\"address\">\n\t\t\t\t\t\t<el-input v-model=\"formData.number\"></el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"联系电话\" prop=\"phone\">\n\t\t\t\t\t\t<el-input v-model.number=\"formData.phone\" maxLength=\"11\"></el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"QQ\" prop=\"qq\">\n\t\t\t\t\t\t<el-input v-model=\"formData.description\"></el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"邮箱\" prop=\"mail\">\n\t\t\t\t\t\t<el-input v-model=\"formData.promotion_info\"></el-input>\n\t\t\t\t\t</el-form-item>\n\r\n\t\t\t\t\t<el-form-item label=\"上传头像\">\r\n\t\t\t\t\t\t<el-upload\r\n\t\t\t\t\t\t  class=\"avatar-uploader\"\r\n\t\t\t\t\t\t  :action=\"baseUrl + '/v1/addimg/shop'\"\r\n\t\t\t\t\t\t  :show-file-list=\"false\"\r\n\t\t\t\t\t\t  :on-success=\"handleShopAvatarScucess\"\r\n\t\t\t\t\t\t  :before-upload=\"beforeAvatarUpload\">\r\n\t\t\t\t\t\t  <img v-if=\"formData.image_path\" :src=\"baseImgPath + formData.image_path\" class=\"avatar\">\r\n\t\t\t\t\t\t  <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n\t\t\t\t\t\t</el-upload>\r\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\n\t\t\t\t\t<el-form-item class=\"button_submit\">\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"submitForm('formData')\">立即创建</el-button>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</el-form>\n  \t\t\t</el-col>\n  \t\t</el-row>\n    </div>\n</template>\n\n<script>\n  /*  import headTop from '@/components/headTop'\n    import {cityGuess, addShop, searchplace, foodCategory} from '@/api/getData'\n    import {baseUrl, baseImgPath} from '@/config/env'*/\n    export default {\n    \tdata(){\n    \t\treturn {\n    \t\t\tcity: {},\n    \t\t\tformData: {\n\t\t\t\t\tname: '', //店铺名称\n\t\t\t\t\taddress: '', //地址\n\t\t\t\t\tlatitude: '',\n\t\t\t\t\tlongitude: '',\n\t\t\t\t\tdescription: '', //介绍\n\t\t\t\t\tphone: '',\n\t\t\t\t\tpromotion_info: '',\n\t\t\t\t\tis_premium: true,\n\t\t\t\t\tdelivery_mode: true,\n\t\t\t\t\tnew: true,\n\t\t\t\t\tbao: true,\n\t\t\t\t\tzhun: true,\n\t\t\t\t\tpiao: true,\n\t\t\t\t\tstartTime: '',\n       \t \t\t\tendTime: '',\n       \t \t\t\timage_path: '',\n       \t \t\t\tbusiness_license_image: '',\n       \t \t\t\tcatering_service_license_image: '',\n\n\t\t        },\n\t\t        rules: {\n\n\t\t\t\t\tphone: [\n\t\t\t\t\t\t{ required: true, message: '请输入联系电话' },\n\t\t\t\t\t\t{ type: 'number', message: '电话号码必须是数字' }\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t    // baseUrl,\n\t\t\t    // baseImgPath,\n\t\t\t    categoryOptions: [],\n    \t\t}\n    \t},\n    \tcomponents: {\n    \t\t// headTop,\n    \t},\n    \tmounted(){\n    \t\tthis.initData();\n    \t},\n    \tmethods: {\n    \t\tasync initData(){\n    \t\t\ttry{\n    \t\t\t\tthis.city = await cityGuess();\n    \t\t\t\tconst categories = await foodCategory();\n    \t\t\t\tcategories.forEach(item => {\n    \t\t\t\t\tif (item.sub_categories.length) {\n    \t\t\t\t\t\tconst addnew = {\n    \t\t\t\t\t\t\tvalue: item.name,\n\t\t\t\t\t\t        label: item.name,\n\t\t\t\t\t\t        children: []\n    \t\t\t\t\t\t}\n    \t\t\t\t\t\titem.sub_categories.forEach((subitem, index) => {\n    \t\t\t\t\t\t\tif (index == 0) {\n    \t\t\t\t\t\t\t\treturn\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\taddnew.children.push({\n    \t\t\t\t\t\t\t\tvalue: subitem.name,\n\t\t\t\t\t\t        \tlabel: subitem.name,\n    \t\t\t\t\t\t\t})\n    \t\t\t\t\t\t})\n    \t\t\t\t\t\tthis.categoryOptions.push(addnew)\n\n    \t\t\t\t\t}\n    \t\t\t\t})\n    \t\t\t}catch(err){\n    \t\t\t\tconsole.log(err);\n    \t\t\t}\n    \t\t},\n    \t\tasync querySearchAsync(queryString, cb) {\n    \t\t\tif (queryString) {\n\t    \t\t\ttry{\n\t    \t\t\t\tconst cityList = await searchplace(this.city.id, queryString);\n\t    \t\t\t\tif (cityList instanceof Array) {\n\t\t    \t\t\t\tcityList.map(item => {\n\t\t    \t\t\t\t\titem.value = item.address;\n\t\t    \t\t\t\t\treturn item;\n\t\t    \t\t\t\t})\n\t\t    \t\t\t\tcb(cityList)\n\t    \t\t\t\t}\n\t    \t\t\t}catch(err){\n\t    \t\t\t\tconsole.log(err)\n\t    \t\t\t}\n    \t\t\t}\n\t\t    },\n\t\t    addressSelect(address){\n\t\t    \tthis.formData.latitude = address.latitude;\n\t\t    \tthis.formData.longitude = address.longitude;\n\t\t    \tconsole.log(this.formData.latitude, this.formData.longitude)\n\t\t    },\n\t\t\thandleShopAvatarScucess(res, file) {\n\t\t\t\tif (res.status == 1) {\n\t\t\t\t\tthis.formData.image_path = res.image_path;\n\t\t\t\t}else{\n\t\t\t\t\tthis.$message.error('上传图片失败！');\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleBusinessAvatarScucess(res, file) {\n\t\t\t\tif (res.status == 1) {\n\t\t\t\t\tthis.formData.business_license_image = res.image_path;\n\t\t\t\t}else{\n\t\t\t\t\tthis.$message.error('上传图片失败！');\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleServiceAvatarScucess(res, file) {\n\t\t\t\tif (res.status == 1) {\n\t\t\t\t\tthis.formData.catering_service_license_image = res.image_path;\n\t\t\t\t}else{\n\t\t\t\t\tthis.$message.error('上传图片失败！');\n\t\t\t\t}\n\t\t\t},\n\t\t\tbeforeAvatarUpload(file) {\n\t\t\t\tconst isRightType = (file.type === 'image/jpeg') || (file.type === 'image/png');\n\t\t\t\tconst isLt2M = file.size / 1024 / 1024 < 2;\n\n\t\t\t\tif (!isRightType) {\n\t\t\t\t\tthis.$message.error('上传头像图片只能是 JPG 格式!');\n\t\t\t\t}\n\t\t\t\tif (!isLt2M) {\n\t\t\t\t\tthis.$message.error('上传头像图片大小不能超过 2MB!');\n\t\t\t\t}\n\t\t\t\treturn isRightType && isLt2M;\n\t\t\t},\n\t\t\ttableRowClassName(row, index) {\n\t\t        if (index === 1) {\n\t\t        \treturn 'info-row';\n\t\t        } else if (index === 3) {\n\t\t        \treturn 'positive-row';\n\t\t        }\n\t\t        return '';\n\t\t    },\n\t\t    selectActivity(){\n\t\t    \tthis.$prompt('请输入活动详情', '提示', {\n\t\t          \tconfirmButtonText: '确定',\n\t\t          \tcancelButtonText: '取消',\n\t\t        }).then(({ value }) => {\n\t\t        \tif (value == null) {\n\t\t        \t\tthis.$message({\n\t\t\t\t            type: 'info',\n\t\t\t\t            message: '请输入活动详情'\n\t\t\t\t        });\n\t\t        \t\treturn\n\t\t        \t}\n\t\t          \tlet newObj = {};\n\t\t          \t\n\t\t          \tthis.activities.push(newObj);\n\t\t        }).catch(() => {\n\t\t          \tthis.$message({\n\t\t            \ttype: 'info',\n\t\t            \tmessage: '取消输入'\n\t\t          \t});\n\t\t        });\n\t\t    },\n\t\t    handleDelete(index){\n\t\t    \tthis.activities.splice(index, 1)\n\t\t    },\n\t\t    submitForm(formName) {\n\t\t\t\tthis.$refs[formName].validate(async (valid) => {\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tObject.assign(this.formData, {activities: this.activities}, {\n\t\t\t\t\t\t\tcategory: this.selectedCategory.join('/')\n\t\t\t\t\t\t})\n\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\tlet result = await addShop(this.formData);\n\t\t\t\t\t\t\tif (result.status == 1) {\n\t\t\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t            \ttype: 'success',\n\t\t\t\t\t            \tmessage: '添加成功'\n\t\t\t\t\t          \t});\n\t\t\t\t\t          \tthis.formData = {\n\t\t\t\t\t\t\t\t\tname: '', //店铺名称\n\t\t\t\t\t\t\t\t\taddress: '', //地址\n\t\t\t\t\t\t\t\t\tlatitude: '',\n\t\t\t\t\t\t\t\t\tlongitude: '',\n\t\t\t\t\t\t\t\t\tdescription: '', //介绍\n\t\t\t\t\t\t\t\t\tphone: '',\n\t\t\t\t\t\t\t\t\tpromotion_info: '',\n\t\t\t\t\t\t\t\t\tfloat_delivery_fee: 5, //运费\n\t\t\t\t\t\t\t\t\tfloat_minimum_order_amount: 20, //起价\n\t\t\t\t\t\t\t\t\tis_premium: true,\n\t\t\t\t\t\t\t\t\tdelivery_mode: true,\n\t\t\t\t\t\t\t\t\tnew: true,\n\t\t\t\t\t\t\t\t\tbao: true,\n\t\t\t\t\t\t\t\t\tzhun: true,\n\t\t\t\t\t\t\t\t\tpiao: true,\n\t\t\t\t\t\t\t\t\tstartTime: '',\n\t\t\t\t       \t \t\t\tendTime: '',\n\t\t\t\t       \t \t\t\timage_path: '',\n\t\t\t\t       \t \t\t\tbusiness_license_image: '',\n\t\t\t\t       \t \t\t\tcatering_service_license_image: '',\n\t\t\t\t\t\t        };\n\t\t\t\t\t\t        this.selectedCategory = ['快餐便当', '简餐'];\n\t\t\t\t\t\t        this.activities = [{\n\t\t\t\t\t\t        \ticon_name: '减',\n\t\t\t\t\t\t        \tname: '满减优惠',\n\t\t\t\t\t\t        \tdescription: '满30减5，满60减8',\n\t\t\t\t\t\t\t    }];\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t            \ttype: 'error',\n\t\t\t\t\t            \tmessage: result.message\n\t\t\t\t\t          \t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsole.log(result)\n\t\t\t\t\t\t}catch(err){\n\t\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$notify.error({\n\t\t\t\t\t\t\ttitle: '错误',\n\t\t\t\t\t\t\tmessage: '请检查输入是否正确',\n\t\t\t\t\t\t\toffset: 100\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t}\n    }\n</script>\n\n<style lang=\"less\">\n\t@import '../style/mixin';\n\t.button_submit{\n\t\ttext-align: center;\n\t}\n\t.avatar-uploader .el-upload {\n\t    border: 1px dashed #d9d9d9;\n\t    border-radius: 6px;\n\t    cursor: pointer;\n\t    position: relative;\n\t    overflow: hidden;\n\t}\n\t.avatar-uploader .el-upload:hover {\n\t    border-color: #20a0ff;\n\t}\n\t.avatar-uploader-icon {\n\t    font-size: 28px;\n\t    color: #8c939d;\n\t    width: 120px;\n\t    height: 120px;\n\t    line-height: 120px;\n\t    text-align: center;\n\t}\n\t.avatar {\n\t    width: 120px;\n\t    height: 120px;\n\t    display: block;\n\t}\n\t.el-table .info-row {\n\t    background: #c9e5f5;\n\t}\n\n\t.el-table .positive-row {\n\t    background: #e2f0e4;\n\t}\n</style>\n"]}]}